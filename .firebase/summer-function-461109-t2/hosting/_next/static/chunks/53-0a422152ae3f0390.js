"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[53],{283:(e,r,t)=>{t.d(r,{A:()=>c,O:()=>d});var a=t(5155),n=t(2115),s=t(6104),l=t(5695);let i=()=>(0,a.jsx)("div",{className:"fixed inset-0 z-[200] flex flex-col items-center justify-center bg-background/80 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-6",children:[(0,a.jsxs)("div",{className:"text-5xl font-headline font-black italic tracking-tighter",children:[(0,a.jsx)("span",{className:"text-white",children:"Bet"}),(0,a.jsx)("span",{className:"text-primary",children:"Nexo"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)("div",{className:"h-3 w-3 rounded-full bg-primary animate-loader-dot",style:{animationDelay:"0s"}}),(0,a.jsx)("div",{className:"h-3 w-3 rounded-full bg-primary animate-loader-dot",style:{animationDelay:"0.2s"}}),(0,a.jsx)("div",{className:"h-3 w-3 rounded-full bg-primary animate-loader-dot",style:{animationDelay:"0.4s"}})]})]})}),o=(0,n.createContext)(void 0),d=e=>{let{children:r}=e,[t,d]=(0,n.useState)(null),[c,u]=(0,n.useState)(null),[m,f]=(0,n.useState)(0),[h,y]=(0,n.useState)("USD"),[p,g]=(0,n.useState)(!0),[x,b]=(0,n.useState)(!1),v=(0,l.useRouter)(),w=(0,l.usePathname)(),N=(0,n.useCallback)(async e=>{if(!e)return null;let r=(0,s.H9)(s.db,"users",e);try{let t=await (0,s.x7)(r);if(t.exists()){let a=t.data();if(!a.customUserId){let e=Math.floor(1e8+9e8*Math.random());await (0,s.mZ)(r,{customUserId:e}),a.customUserId=e}let n=a.role||"User";return{id:e,...a,customUserId:a.customUserId,currency:a.currency||"USD",role:n}}return null}catch(r){throw console.error("AuthContext: Error fetching user document for UID "+e+":",r),r}},[]);(0,n.useEffect)(()=>{let e=(0,s.hg)(s.j2,async e=>{g(!0);try{if(e){u(e);let r=await N(e.uid);if(r){let t={...r,emailVerified:e.emailVerified};"Admin"===t.role||e.emailVerified?(d(t),y(t.currency||"USD"),f(t.balance||0)):d(null)}else d(null)}else d(null),u(null)}catch(e){console.error("AuthContext: Error in onAuthStateChanged listener:",e),d(null),u(null)}finally{g(!1)}});return()=>e()},[N]),(0,n.useEffect)(()=>{b(!1)},[w]),(0,n.useEffect)(()=>{if(p)return;let e=w.startsWith("/login")||w.startsWith("/signup"),r=w.startsWith("/admin"),a=["/profile","/wallet","/deposit","/withdraw","/bet-slip","/user-dashboard","/admin"].some(e=>w.startsWith(e)),n=!1,s="";t?"Admin"===t.role?r||e||(n=!0,s="/admin"):e&&(n=!0,s="/"):a&&(n=!0,s="/login"),n&&s&&w!==s&&(b(!0),v.push(s))},[t,p,w,v]);let j=async function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var t,a;let n=null,l=e.id,i=s.j2.currentUser,o=e.currency||"USD",d=e.role,c=e.name||(null==i?void 0:i.displayName)||((null==i?void 0:i.email)?i.email.split("@")[0]:"User"),u=e.email||(null==i?void 0:i.email)||"",m=e.phone||(null==i?void 0:i.phoneNumber)||"",f=null!=(a=null!=(t=e.emailVerified)?t:null==i?void 0:i.emailVerified)&&a;if(r){let r=(0,s.H9)(s.db,"users",l),t={customUserId:e.customUserId,name:c,email:u,phone:m,currency:o,country:e.country||"",balance:0,isVerified:!1,createdAt:(0,s.O5)(),role:d||"User"};await (0,s.BN)(r,t),n={...t,id:l,emailVerified:f}}else{let r=await N(l);if(r)n={...r,id:l,emailVerified:f};else{let r=(0,s.H9)(s.db,"users",l),t={customUserId:Math.floor(1e8+9e8*Math.random()),name:c,email:u,phone:m,currency:o,country:e.country||"",balance:0,isVerified:!1,createdAt:(0,s.O5)(),role:d||"User"};await (0,s.BN)(r,t),n={...t,id:l,emailVerified:f}}}return n}catch(r){throw console.error("AuthContext: Error during app context login/signup for UID:",e.id,r),r}},I=async()=>{g(!0);try{await (0,s.CI)(s.j2)}catch(e){console.error("AuthContext: Firebase signOut error:",e),d(null),u(null),g(!1)}},U=async e=>{if(t){let r=t.currency;d({...t,currency:e}),y(e);let a=(0,s.H9)(s.db,"users",t.id);try{await (0,s.mZ)(a,{currency:e})}catch(e){console.error("Failed to update currency in Firestore:",e),d({...t,currency:r}),y(r)}}},A=async e=>{if(t){let r=(t.balance||0)+e,a=t.balance;d({...t,balance:r}),f(r);let n=(0,s.H9)(s.db,"users",t.id);try{await (0,s.mZ)(n,{balance:r})}catch(e){console.error("Failed to update balance in Firestore:",e),d({...t,balance:a}),f(a||0)}}};return p||x?(0,a.jsx)(i,{}):(0,a.jsx)(o.Provider,{value:{user:t,firebaseUser:c,login:j,logout:I,balance:m,currency:h,setCurrency:U,updateBalance:A,loadingAuth:p},children:r})},c=()=>{let e=(0,n.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},285:(e,r,t)=>{t.d(r,{$:()=>d});var a=t(5155),n=t(2115),s=t(9708),l=t(2085),i=t(9434);let o=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,r)=>{let{className:t,variant:n,size:l,asChild:d=!1,...c}=e,u=d?s.DX:"button";return(0,a.jsx)(u,{className:(0,i.cn)(o({variant:n,size:l,className:t})),ref:r,...c})});d.displayName="Button"},6104:(e,r,t)=>{t.d(r,{AB:()=>s.AB,BN:()=>s.BN,CI:()=>n.CI,D:()=>i.D,GG:()=>s.GG,H9:()=>s.H9,HM:()=>s.HM,IG:()=>u,Kh:()=>m,My:()=>s.My,O5:()=>s.O5,P:()=>s.P,St:()=>f,_M:()=>s._M,db:()=>c,eJ:()=>n.eJ,gA:()=>n.gA,gS:()=>s.gS,hg:()=>n.hg,hv:()=>i.KR,j2:()=>d,kd:()=>s.kd,mZ:()=>s.mZ,qk:()=>i.qk,rJ:()=>s.rJ,wP:()=>s.wP,x7:()=>s.x7,x9:()=>n.x9});var a=t(3915),n=t(3004),s=t(5317),l=t(6864),i=t(858);let o=(0,a.Dk)().length?(0,a.Sx)():(0,a.Wp)({apiKey:"AIzaSyAAeONCc7rsrvOwlbxmHjxf-qUw3O1v9QY",authDomain:"summer-function-461109-t2.firebaseapp.com",projectId:"summer-function-461109-t2",storageBucket:"summer-function-461109-t2.appspot.com",messagingSenderId:"404019274818",appId:"1:404019274818:web:e765b67dfb7710d4be79db",measurementId:"G-8FH69DQ5Q9"}),d=(0,n.xI)(o),c=(0,s.aU)(o),u=(0,i.c7)(o);(0,l.TT)().then(e=>e?(0,l.P5)(o):null);let m=async e=>{let r=(0,s.rJ)(c,"users"),t=(0,s.P)(r,(0,s._M)("customUserId","==",Number(e)));try{let e=await (0,s.GG)(t);if(!e.empty){let r=e.docs[0].data();if(r&&r.email)return{email:r.email}}return null}catch(e){throw console.error("Error finding user by custom ID:",e),e}},f=async e=>{let r=(0,s.rJ)(c,"users"),t=(0,s.P)(r,(0,s._M)("customUserId","==",e),(0,s.AB)(1));try{let e=await (0,s.GG)(t);if(!e.empty)return e.docs[0];return null}catch(e){throw console.error("Error finding user document by custom ID:",e),e}}},6695:(e,r,t)=>{t.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>l,aR:()=>i,wL:()=>u});var a=t(5155),n=t(2115),s=t(9434);let l=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...n})});l.displayName="Card";let i=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...n})});i.displayName="CardHeader";let o=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",t),...n})});o.displayName="CardTitle";let d=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",t),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",t),...n})});c.displayName="CardContent";let u=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",t),...n})});u.displayName="CardFooter"},9434:(e,r,t)=>{t.d(r,{cn:()=>s});var a=t(2596),n=t(9688);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,n.QP)((0,a.$)(r))}}}]);