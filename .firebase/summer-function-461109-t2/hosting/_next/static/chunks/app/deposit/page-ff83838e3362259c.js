(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1235],{594:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(157).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},707:(e,t,s)=>{"use strict";s.d(t,{default:()=>u});var a=s(5155),n=s(6874),r=s.n(n),o=s(285),i=s(283),c=s(5695),l=s(4301),d=s(5074);function m(){let{user:e,balance:t,currency:s,logout:n,loadingAuth:m}=(0,i.A)();return(0,c.useRouter)(),(0,a.jsx)("header",{className:"sticky top-0 z-50 w-full border-b border-border/40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,a.jsxs)("div",{className:"container flex h-16 items-center justify-between gap-4",children:[(0,a.jsx)("div",{className:"flex items-center",children:m?(0,a.jsx)("div",{className:"h-9 w-24 animate-pulse rounded-md bg-muted"}):e&&"Admin"!==e.role?(0,a.jsx)(o.$,{variant:"ghost",size:"sm",asChild:!0,children:(0,a.jsxs)(r(),{href:"/wallet",className:"flex items-center gap-2",children:[(0,a.jsx)(l.A,{className:"h-5 w-5 text-primary"}),(0,a.jsxs)("div",{className:"flex flex-col items-start",children:[(0,a.jsx)("span",{className:"text-xs font-semibold text-foreground",children:t.toFixed(2)}),(0,a.jsx)("span",{className:"text-[10px] text-muted-foreground -mt-1",children:s})]})]})}):(e&&e.role,(0,a.jsx)("div",{className:"w-24"}))}),(0,a.jsx)("div",{className:"flex-grow text-center",children:(0,a.jsxs)(r(),{href:"/",className:"text-4xl font-headline font-black italic tracking-tighter",children:[(0,a.jsx)("span",{className:"text-white",children:"Bet"}),(0,a.jsx)("span",{className:"text-primary",children:"Nexo"})]})}),(0,a.jsx)("div",{className:"flex items-center justify-end",children:e?(0,a.jsx)(o.$,{variant:"ghost",size:"icon",children:(0,a.jsx)(d.A,{className:"h-6 w-6 text-muted-foreground"})}):(0,a.jsx)("div",{className:"w-10"})})]})})}function u(e){let{children:t}=e;return(0,a.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,a.jsx)(m,{}),(0,a.jsx)("main",{className:"flex-grow",children:t})]})}},2523:(e,t,s)=>{"use strict";s.d(t,{p:()=>o});var a=s(5155),n=s(2115),r=s(9434);let o=n.forwardRef((e,t)=>{let{className:s,type:n,...o}=e;return(0,a.jsx)("input",{type:n,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...o})});o.displayName="Input"},2543:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(157).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},4301:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(157).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},4864:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(5155),n=s(6695),r=s(285),o=s(6766);let i=e=>{let{methods:t,onSelectMethod:s,actionType:i}=e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("h2",{className:"font-headline text-2xl font-semibold text-center",children:["Choose a ",i," Method"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>(0,a.jsxs)(n.Zp,{className:"hover:shadow-primary/30 hover:shadow-lg transition-all duration-300 cursor-pointer transform hover:-translate-y-1",onClick:()=>s(e.id),children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,a.jsx)(n.ZB,{className:"text-lg font-medium",children:e.name}),(0,a.jsx)(o.default,{src:e.logoUrl,alt:"".concat(e.name," logo"),width:40,height:40,className:"rounded","data-ai-hint":e.dataAiHint||"".concat(e.name," logo")})]}),(0,a.jsxs)(n.Wu,{children:[e.description&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:e.description}),(0,a.jsxs)(r.$,{className:"w-full bg-primary hover:bg-primary/90",children:[i," with ",e.name]})]})]},e.id))}),0===t.length&&(0,a.jsxs)("p",{className:"text-center text-muted-foreground",children:["No ",i.toLowerCase()," methods available at the moment."]})]})}},5074:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(157).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},6297:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var a=s(5155),n=s(707),r=s(4864),o=s(283),i=s(5695),c=s(2115),l=s(2523),d=s(285),m=s(6695),u=s(7481),x=s(2543),p=s(594),h=s(6104),f=s(8856);function g(){let{user:e,currency:t,loadingAuth:s}=(0,o.A)(),g=(0,i.useRouter)(),{toast:y}=(0,u.dj)(),[b,A]=(0,c.useState)([]),[N,v]=(0,c.useState)(!0),[j,w]=(0,c.useState)(null),[T,k]=(0,c.useState)(""),[S,E]=(0,c.useState)(""),[M,I]=(0,c.useState)(""),[C,q]=(0,c.useState)(!1),D=(0,c.useCallback)(async()=>{v(!0);try{let e=(0,h.P)((0,h.rJ)(h.db,"paymentMethods"),(0,h._M)("transactionType","==","deposit"),(0,h._M)("enabled","==",!0)),s=await (0,h.GG)(e),a=[];s.forEach(e=>{let s=e.data();a.push({id:e.id,name:s.name,logoUrl:s.logoUrl||"https://placehold.co/100x100.png?text=".concat(s.name.charAt(0)),description:"Min: ".concat(s.minAmount," ").concat(t,", Max: ").concat(s.maxAmount>0?s.maxAmount+" "+t:"No Limit"),type:"personal"===s.companyAccountType||"agent"===s.companyAccountType||"merchant"===s.companyAccountType?"mobile":"bank",dataAiHint:"".concat(s.name," logo"),companyAccountNumber:s.companyAccountNumber,companyAccountType:s.companyAccountType,minAmount:s.minAmount,maxAmount:s.maxAmount})}),A(a)}catch(t){console.error("Error fetching deposit methods:",t);let e="Could not load deposit methods.";t.message?t.message.toLowerCase().includes("missing or insufficient permissions")?e='Firestore reported: "'.concat(t.message,'" (Code: ').concat(t.code||"N/A","). This strongly indicates your Firestore security rules are not allowing this query for the currently authenticated user. Please double-check the rules for the 'paymentMethods' collection in your Firebase console. Ensure authenticated users have 'read' (list/get) permission for this collection, especially considering the query filters on 'transactionType' and 'enabled'."):t.message.toLowerCase().includes("index")||t.code&&t.code.toLowerCase().includes("failed-precondition")?e='Firestore reported: "'.concat(t.message,'" (Code: ').concat(t.code||"N/A","). This means a composite index is likely required for your query on the 'paymentMethods' collection (fields: 'transactionType' and 'enabled'). Please open your browser's developer console, find this exact Firebase error message, and click the link it provides to create the index in your Firebase console."):e+=" Details: ".concat(t.message," (Code: ").concat(t.code||"N/A",")"):e+=" An unknown error occurred. (Code: ".concat(t.code||"N/A",")"),y({title:"Error Loading Methods",description:e,variant:"destructive",duration:2e4})}finally{v(!1)}},[y,t]);(0,c.useEffect)(()=>{s||e||g.push("/login"),e&&D()},[e,s,g,D]);let _=async s=>{if(s.preventDefault(),!e||!e.customUserId||!j)return void y({title:"Error",description:"User or payment method not selected.",variant:"destructive"});let a=parseFloat(T);if(isNaN(a)||a<=0)return void y({title:"Invalid Amount",description:"Please enter a valid positive amount.",variant:"destructive"});if(j.minAmount>0&&a<j.minAmount)return void y({title:"Amount Too Low",description:"Minimum deposit amount is ".concat(j.minAmount," ").concat(t,"."),variant:"destructive"});if(j.maxAmount>0&&a>j.maxAmount)return void y({title:"Amount Too High",description:"Maximum deposit amount is ".concat(j.maxAmount," ").concat(t,"."),variant:"destructive"});if(!S.trim())return void y({title:"Required Field",description:"Please enter your sending account number.",variant:"destructive"});if(!M.trim())return void y({title:"Required Field",description:"Please enter the payment transaction ID.",variant:"destructive"});q(!0);try{let s={userId:e.customUserId,userName:e.name||e.email||"N/A",amount:a,currency:t,method:j.name,methodId:j.id,type:"deposit",status:"pending",requestedAt:(0,h.O5)(),userSendingAccountNumber:S,platformReceivingAccountNumber:j.companyAccountNumber,platformAccountType:j.companyAccountType,paymentTransactionId:M};await (0,h.gS)((0,h.rJ)(h.db,"transactions"),s),y({title:"Deposit Request Submitted",description:"".concat(t," ").concat(a.toFixed(2)," deposit request is pending approval. You will be notified once processed.")}),w(null),k(""),E(""),I("")}catch(e){console.error("Error submitting deposit request:",e),y({title:"Request Failed",description:"Could not submit your deposit request. "+e.message,variant:"destructive"})}finally{q(!1)}};return s||e&&N?(0,a.jsx)(n.default,{children:(0,a.jsx)("div",{className:"container py-6",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto space-y-4",children:[(0,a.jsx)(f.E,{className:"h-10 w-1/2 mx-auto"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(e=>(0,a.jsx)(f.E,{className:"h-32 w-full"},e))})]})})}):e?(0,a.jsx)(n.default,{children:(0,a.jsx)("div",{className:"container py-6",children:(0,a.jsx)("div",{className:"max-w-2xl mx-auto",children:j?(0,a.jsxs)(m.Zp,{className:"shadow-xl",children:[(0,a.jsx)(m.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(d.$,{variant:"ghost",size:"sm",onClick:()=>w(null),className:"text-sm",children:[(0,a.jsx)(x.A,{className:"mr-2 h-4 w-4"})," Back"]}),(0,a.jsxs)(m.ZB,{className:"font-headline text-xl text-center flex-grow",children:["Deposit with ",j.name]})]})}),(0,a.jsxs)(m.Wu,{className:"space-y-6",children:[(0,a.jsxs)(m.Zp,{className:"bg-muted/50 p-4",children:[(0,a.jsxs)(m.BT,{className:"text-sm text-foreground mb-2",children:["Please send ",(0,a.jsx)("strong",{className:"text-primary",children:T?"".concat(t," ").concat(T):"your desired amount"})," to the following ",j.companyAccountType," account:"]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"font-mono text-lg bg-background p-2 rounded text-center",children:j.companyAccountNumber}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground text-center",children:["Account Type: ",j.companyAccountType.charAt(0).toUpperCase()+j.companyAccountType.slice(1)]}),j.minAmount>0&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Min Amount: ",j.minAmount," ",t]}),j.maxAmount>0&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Max Amount: ",j.maxAmount," ",t]})]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-3 flex items-start",children:[(0,a.jsx)(p.A,{className:"h-3 w-3 mr-1.5 mt-0.5 shrink-0"}),"After sending the money, fill in the details below and submit your request."]})]}),(0,a.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"amount",className:"block text-sm font-medium text-foreground mb-1",children:["Amount Sent (",t,")"]}),(0,a.jsx)(l.p,{id:"amount",type:"number",value:T,onChange:e=>k(e.target.value),placeholder:"Enter amount (Min: ".concat(j.minAmount,", Max: ").concat(j.maxAmount>0?j.maxAmount:"N/A",")"),min:j.minAmount>0?j.minAmount.toString():"0.01",max:j.maxAmount>0?j.maxAmount.toString():void 0,step:"0.01",required:!0,className:"text-lg",disabled:C})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"userSendingAccountNumber",className:"block text-sm font-medium text-foreground mb-1",children:"Your Sending Account Number (e.g., your Bkash number)"}),(0,a.jsx)(l.p,{id:"userSendingAccountNumber",type:"text",value:S,onChange:e=>E(e.target.value),placeholder:"Enter your account number used for sending",required:!0,className:"text-lg",disabled:C})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"paymentTransactionId",className:"block text-sm font-medium text-foreground mb-1",children:"Payment Transaction ID (TrxID)"}),(0,a.jsx)(l.p,{id:"paymentTransactionId",type:"text",value:M,onChange:e=>I(e.target.value),placeholder:"Enter the TrxID from your payment",required:!0,className:"text-lg",disabled:C})]}),(0,a.jsx)(d.$,{type:"submit",className:"w-full font-semibold text-lg py-3",disabled:C,children:C?"Submitting Request...":"Submit Deposit Request"})]}),(0,a.jsx)("p",{className:"mt-4 text-xs text-muted-foreground text-center",children:"Your deposit request will be reviewed by an admin. Please ensure all details are correct."})]})]}):b.length>0?(0,a.jsx)(r.A,{methods:b,onSelectMethod:e=>{let t=b.find(t=>t.id===e);t&&(w(t),k(""),E(""),I(""))},actionType:"Deposit"}):(0,a.jsx)("p",{className:"text-center text-muted-foreground py-10",children:"No deposit methods are currently available. Please check back later."})})})}):(0,a.jsx)(n.default,{children:(0,a.jsx)("div",{className:"text-center p-10",children:"Redirecting to login..."})})}},7481:(e,t,s)=>{"use strict";s.d(t,{dj:()=>u});var a=s(2115);let n=0,r=new Map,o=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?o(s):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],l={toasts:[]};function d(e){l=i(l,e),c.forEach(e=>{e(l)})}function m(e){let{...t}=e,s=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,t]=a.useState(l);return a.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},7734:(e,t,s)=>{Promise.resolve().then(s.bind(s,6297))},8856:(e,t,s)=>{"use strict";s.d(t,{E:()=>r});var a=s(5155),n=s(9434);function r(e){let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)("animate-pulse rounded-md bg-muted",t),...s})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,3644,3139,6874,6766,53,8441,1684,7358],()=>t(7734)),_N_E=e.O()}]);