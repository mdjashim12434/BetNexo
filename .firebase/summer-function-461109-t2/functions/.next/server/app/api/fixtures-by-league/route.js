(()=>{var e={};e.id=636,e.ids=[636],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29393:(e,t,a)=>{"use strict";a.r(t),a.d(t,{patchFetch:()=>f,routeModule:()=>d,serverHooks:()=>p,workAsyncStorage:()=>c,workUnitAsyncStorage:()=>m});var r={};a.r(r),a.d(r,{GET:()=>l});var s=a(96559),i=a(48088),n=a(37719),o=a(32190),u=a(55130);async function l(e){let{searchParams:t}=new URL(e.url),a=t.get("league_id");if(!a)return o.NextResponse.json({error:"league_id parameter is required."},{status:400});try{let e=(0,u.mZ)(Number(a)),t=(0,u.eF)(Number(a)),[r,s]=await Promise.allSettled([e,t]),i="fulfilled"===r.status?r.value:[],n="fulfilled"===s.status?s.value:[],l=new Set(i.map(e=>e.id)),d=n.filter(e=>!l.has(e.id)),c=[...i,...d].sort((e,t)=>new Date(e.startingAt).getTime()-new Date(t.startingAt).getTime()).map(e=>({id:e.id,home_team:e.homeTeam.name,away_team:e.awayTeam.name,date:e.startingAt.slice(0,10),time:e.startingAt.slice(11,19),sport:e.sportKey}));return o.NextResponse.json(c)}catch(e){return o.NextResponse.json({error:"Failed to fetch league fixtures",details:e.message},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/fixtures-by-league/route",pathname:"/api/fixtures-by-league",filename:"route",bundlePath:"app/api/fixtures-by-league/route"},resolvedPagePath:"/home/user/studio/src/app/api/fixtures-by-league/route.ts",nextConfigOutput:"",userland:r}),{workAsyncStorage:c,workUnitAsyncStorage:m,serverHooks:p}=d;function f(){return(0,n.patchFetch)({workAsyncStorage:c,workUnitAsyncStorage:m})}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55130:(e,t,a)=>{"use strict";a.d(t,{_B:()=>c,eF:()=>d,mZ:()=>l});let r=["LIVE","HT","ET","PEN_LIVE","BREAK","INT"],s=["FT","AET","Finished","POSTP","CANCL","ABAN","SUSP","AWARDED","DELETED","WO","AU"],i=process.env.API_BASE_URL||"http://localhost:9002",n=async e=>{let t;if(e.ok)return e.json();let a=await e.json().catch(()=>({})),r=a.error||a.message||"The API did not provide a specific error message.";switch(e.status){case 401:t="Authentication Failed: The API key is likely invalid or missing.";break;case 403:t="Forbidden: Your current API plan does not allow access to this data.";break;case 404:t="Not Found: The requested match or endpoint could not be found.";break;case 422:t="Unprocessable Content: The API request had invalid parameters (e.g., bad date format).";break;case 400:t="Bad Request: The API request was malformed. Check parameters.";break;case 429:t="Too Many Requests: The hourly API limit has been reached.";break;default:t=`An unexpected API error occurred. Status: ${e.status}, Message: ${r}`}throw console.error(`API Error (Status ${e.status}): ${t}`),Error(t)},o=e=>{if(!e)return new Date().toISOString();let t=new Date(e.replace(" ","T")+"Z");return isNaN(t.getTime())?new Date().toISOString():t.toISOString()},u=e=>Array.isArray(e)?e.map(e=>{let t=e.participants?.find(e=>"home"===e.meta.location),a=e.participants?.find(e=>"away"===e.meta.location),i=e.state||{id:0,state:"NS",name:"Not Started",short_name:"NS",developer_name:"NOT_STARTED"},n=r.includes(i.state),u=s.includes(i.state),l=e.comments?.map(e=>({...e})).sort((e,t)=>t.minute-e.minute)||[],d=e.scores?.find(e=>e.participant_id===t?.id&&"CURRENT"===e.description)?.score.goals||0,c=e.scores?.find(e=>e.participant_id===a?.id&&"CURRENT"===e.description)?.score.goals||0,m=e.periods?.find(e=>e.ticking)?.minutes;return{id:e.id,sportKey:"football",name:e.name,startingAt:o(e.starting_at),state:i,isLive:n,isFinished:u,league:{id:e.league_id,name:e.league?.name||"N/A",countryName:e.league?.country?.name||"N/A"},homeTeam:{id:t?.id||0,name:t?.name||"Home",image_path:t?.image_path},awayTeam:{id:a?.id||0,name:a?.name||"Away",image_path:a?.image_path},odds:{},comments:l,venue:e.venue?{name:e.venue.name,city:e.venue.city_name||e.venue.city||""}:void 0,referee:e.referee?{name:e.referee.fullname}:void 0,homeScore:d,awayScore:c,minute:m,latestEvent:((e,t)=>{let a=t&&t.length>0?t[0]:null;if(a)return{text:`${a.minute}' - ${a.comment}`,isGoal:a.is_goal};let r=e&&e.length>0?[...e].sort((e,t)=>t.minute-e.minute)[0]:null;return r?{text:`${r.minute}' - ${r.type?.name||"Event"}`,isGoal:r.type?.code==="GOAL"}:n&&"Live"!==i.name?{text:i.name,isGoal:!1}:void 0})(e.events,l)}}):[];async function l(e,t=!1){let a=e?`/api/football/live-scores?leagueId=${e}`:"/api/football/live-scores";t&&(a+=a.includes("?")?"&firstPageOnly=true":"?firstPageOnly=true");let r=`${i}${a}`,s=await fetch(r,{cache:"no-store"}),o=await n(s);return u(o?.data||[]).filter(e=>!e.isFinished)}async function d(e,t=!1){let a=e?`/api/football/upcoming-fixtures?leagueId=${e}`:"/api/football/upcoming-fixtures";t&&(a+=a.includes("?")?"&firstPageOnly=true":"?firstPageOnly=true");let r=`${i}${a}`,s=await fetch(r,{cache:"no-store"}),o=await n(s),l=u(o?.data||[]),c=new Date;return l.filter(e=>new Date(e.startingAt)>c&&!e.isFinished)}async function c(e){let t=`${i}/api/football/fixtures?fixtureId=${e}`,a=await fetch(t,{cache:"no-store"}),r=u([(await n(a)).data]);if(!r||0===r.length)throw Error(`Could not process fixture details for ID ${e}.`);return r[0]}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[4447,580],()=>a(29393));module.exports=r})();