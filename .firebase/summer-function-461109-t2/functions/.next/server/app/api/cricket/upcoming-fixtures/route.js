(()=>{var e={};e.id=6911,e.ids=[6911],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},49159:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>x,routeModule:()=>l,serverHooks:()=>m,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>g});var s={};r.r(s),r.d(s,{GET:()=>p});var a=r(96559),o=r(48088),n=r(37719),i=r(32190);let u=process.env.SPORTMONKS_API_KEY,c=e=>{let t=e.getFullYear(),r=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getDate().toString().padStart(2,"0");return`${t}-${r}-${s}`};async function p(e){if(!u)return console.warn("SPORTMONKS_API_KEY is not set. Returning empty data for upcoming cricket fixtures. Please set the API key in your .env file."),i.NextResponse.json({data:[]});let{searchParams:t}=new URL(e.url),r=t.get("leagueId"),s=c(new Date),a=c(new Date(Date.now()+6048e5)),o=`https://api.sportmonks.com/v2.0/cricket/fixtures?api_token=${u}&include=localteam,visitorteam,league,stage,venue&tz=UTC&filter[starts_between]=${s},${a}&sort=starting_at`;r&&(o+=`&leagues=${r}`);try{let e=[],t=1,r=!0;for(;r;){let s=`${o}&page=${t}`,a=await fetch(s,{cache:"no-store"});if(!a.ok){let e=await a.json().catch(()=>({}));console.error("Error from Sportmonks Cricket API (upcoming v2):",a.status,e);let t=e.message||`Failed to fetch upcoming cricket data. Status: ${a.status}`;return i.NextResponse.json({error:t},{status:a.status})}let n=await a.json();if(n.data&&n.data.length>0){let t=n.data.filter(e=>"NS"===e.status);e=e.concat(t)}n.meta&&n.meta.pagination&&n.meta.pagination.current_page<n.meta.pagination.total_pages?t++:r=!1}return i.NextResponse.json({data:e})}catch(e){return console.error("Error proxying request to Sportmonks Cricket API (upcoming v2):",e),i.NextResponse.json({error:"An internal server error occurred while contacting the proxy API."},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/cricket/upcoming-fixtures/route",pathname:"/api/cricket/upcoming-fixtures",filename:"route",bundlePath:"app/api/cricket/upcoming-fixtures/route"},resolvedPagePath:"/home/user/studio/src/app/api/cricket/upcoming-fixtures/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:d,workUnitAsyncStorage:g,serverHooks:m}=l;function x(){return(0,n.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:g})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4447,580],()=>r(49159));module.exports=s})();