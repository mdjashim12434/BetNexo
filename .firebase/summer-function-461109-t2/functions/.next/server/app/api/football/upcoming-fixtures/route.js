(()=>{var e={};e.id=3097,e.ids=[3097],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30234:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>x,routeModule:()=>c,serverHooks:()=>g,workAsyncStorage:()=>f,workUnitAsyncStorage:()=>d});var s={};r.r(s),r.d(s,{GET:()=>l});var o=r(96559),a=r(48088),n=r(37719),i=r(32190);let u=process.env.SPORTMONKS_API_KEY,p=e=>e.toISOString().split("T")[0];async function l(e){if(!u)return console.warn("SPORTMONKS_API_KEY is not set. Returning empty data for upcoming fixtures. Please set the API key in your .env file."),i.NextResponse.json({data:[]});let{searchParams:t}=new URL(e.url),r=t.get("leagueId"),s="true"===t.get("firstPageOnly"),o=p(new Date),a=new Date;a.setDate(a.getDate()+30);let n=p(a),l=`https://api.sportmonks.com/v3/football/fixtures/between/${o}/${n}?api_token=${u}&include=participants;league.country;state&tz=UTC`;r&&(l+=`&leagues=${r}`);try{if(s){let e=`${l}&page=1`,t=await fetch(e,{cache:"no-store"});if(!t.ok){let e=await t.json().catch(()=>({}));console.error("Error fetching first page of upcoming football fixtures:",t.status,e);let r=e.message||`Failed to fetch data. Status: ${t.status}`;return i.NextResponse.json({error:r},{status:t.status})}let r=await t.json();return i.NextResponse.json(r)}let e=[],t=1,r=!0;for(;r;){let s=`${l}&page=${t}`,o=await fetch(s,{cache:"no-store"});if(!o.ok){let e=await o.json().catch(()=>({}));console.error("Error fetching from Sportmonks proxy for upcoming football fixtures:",o.status,e);let t=e.message||`Failed to fetch football upcoming fixtures. Status: ${o.status}`;return i.NextResponse.json({error:t},{status:o.status})}let a=await o.json();a.data&&a.data.length>0&&(e=e.concat(a.data)),a.pagination&&a.pagination.has_more?t++:r=!1}return i.NextResponse.json({data:e})}catch(e){return console.error("Error in football upcoming fixtures proxy route:",e),i.NextResponse.json({error:"An internal server error occurred: "+e.message},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/football/upcoming-fixtures/route",pathname:"/api/football/upcoming-fixtures",filename:"route",bundlePath:"app/api/football/upcoming-fixtures/route"},resolvedPagePath:"/home/user/studio/src/app/api/football/upcoming-fixtures/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:f,workUnitAsyncStorage:d,serverHooks:g}=c;function x(){return(0,n.patchFetch)({workAsyncStorage:f,workUnitAsyncStorage:d})}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4447,580],()=>r(30234));module.exports=s})();